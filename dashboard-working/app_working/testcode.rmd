---
title: "R Notebook"
output: html_notebook
---

```{r}
allblocks <- read.csv("../../data/score_sets/long_scores.csv", stringsAsFactors = TRUE)
allblocks$fromId <- as.character(allblocks$fromId)


# Import shape file data
# keep necessary columns and rows for shp
canada_dbs <- st_read("../../code/Visualizations/census2016_DBS_shp/DB_Van_CMA/DB_Van_CMA.shp", stringsAsFactors = FALSE)

# keep necessary columns and rows for shp
van_dbs <- data.frame(canada_dbs[which(canada_dbs$CMANAME == "Vancouver"), ])
van_dbs$ID <- seq.int(nrow(van_dbs))
clean_van_dbs <- van_dbs[, c(1, 28, 29)]



# join the scores and shapefile data
van_dbs_scores <- left_join(clean_van_dbs, allblocks, by = c('DBUID' = 'fromId'))

# convert back to sf object
van_dbs_scores_sf <- st_as_sf(van_dbs_scores)
van_dbs_scores_st <- st_transform(van_dbs_scores_sf,crs = 4326)

```

```{r}
van_dbs_scores
```

